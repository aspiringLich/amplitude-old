@use "sass:map";

$colors: //
    (
        "red": 0,
    ),
    (
        "yellow": 47,
        "sat": 1.2,
    ),
    (
        "green": 120,
    ),
    (
        "blue": 189,
    ),
    (
        "purple": 264,
    ),
    (
        "0": 0,
        "sat": 0,
        "val": 0.4,
    ),
    (
        "1": 0,
        "sat": 0,
        "val": 0.95,
    ),
    (
        "2": 0,
        "sat": 0,
        "val": 1,
    ),
    (
        "3": 0,
        "sat": 0,
        "val": 1.1,
    );

@function try-get($map, $key, $default) {
    $val: map.get($map, $key);
    @if $val == null {
        $val: $default;
    }
    @return $val;
}

@function key($map, $index) {
    @return nth(nth($map, $index), 1);
}

@function val($map, $index) {
    @return nth(nth($map, $index), 2);
}

:root {
    @each $val in $colors {
        $name: key($val, 1);
        $hue: val($val, 1);

        $sat: try-get($val, "sat", 1);
        $val: try-get($val, "val", 1);

        --color-#{$name}-d2: hsl(#{$hue}, #{$sat * 55%}, #{$val * 62%});
        --color-#{$name}-d1: hsl(#{$hue}, #{$sat * 57%}, #{$val * 72%});

        --color-#{$name}-m: hsl(#{$hue}, #{$sat * 60%}, #{$val * 80%});

        --color-#{$name}-l0: hsl(#{$hue}, #{$sat * 62%}, #{$val * 92%});
        --color-#{$name}-l1: hsl(#{$hue}, #{$sat * 63%}, #{$val * 94%});
        --color-#{$name}-l2: hsl(#{$hue}, #{$sat * 66%}, #{$val * 96%});
    }
}
